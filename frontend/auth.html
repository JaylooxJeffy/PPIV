<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autenticaci√≥n - GIS Risk Zulia</title>
    <link rel="stylesheet" href="auth-styles.css">
</head>
<body>
    <!-- Fondo animado -->
    <div class="animated-background">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Contenedor principal -->
    <div class="auth-container">
        <!-- Logo y t√≠tulo -->
        <div class="auth-header">
            <div class="logo-circle">üó∫Ô∏è</div>
            <h1>GIS Risk Zulia</h1>
            <p class="subtitle">Sistema de Informaci√≥n Geogr√°fica</p>
        </div>

        <!-- Tabs para cambiar entre Login y Registro -->
        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">Iniciar Sesi√≥n</button>
            <button class="auth-tab" data-tab="register">Registrarse</button>
        </div>

        <!-- ========== FORMULARIO DE LOGIN ========== -->
         <form id="login-form" class="auth-form active">
    <div class="alert info" style="margin-bottom: 20px;">
        <small>Usa tu email y contrase√±a √∫nicos para acceder al sistema.
            Esto quiere decir que no podr√°s usar datos ya registrados. Por ejemplo:
            <strong>Tipo de usuario:</strong> Consultor/Analista/Administrador.
            <strong>Usuario:</strong> Admin.
            <strong>Contrase√±a:</strong> Admin123.
            <strong>Email:</strong> admin@gisrisk.com
            (Estos son datos de ejemplo)
            Si desea crear una cuenta secundaria, deber√° usar credenciales diferentes.
        </small>
    </div>
        <div class="auth-form-container active" id="login-container">
            <form id="login-form" class="auth-form active">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input 
                        type="email" 
                        id="login-email" 
                        name="email"
                        placeholder="tu@email.com"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="login-password">Contrase√±a</label>
                    <input 
                        type="password" 
                        id="login-password" 
                        name="password"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                        required
                    >
                </div>

                <button type="submit" class="auth-btn primary">
                    <span>Ingresar</span>
                    <svg class="btn-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M7 3L14 10L7 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <div class="forgot-credentials">
                    <button type="button" class="link-btn" id="btn-forgot-credentials">
                        ¬øOlvidaste tus datos? Rest√°uralos aqu√≠
                    </button>
                </div>

                <div id="login-message" class="message"></div>
            </form>
        </div>

        <!-- FORMULARIO DE RECUPERACION -->
        <div class="auth-form-container" id="recovery-container">
            <form id="recovery-form" class="auth-form">
                <h2 class="form-title">Recuperar Credenciales</h2>
                
                <div class="alert info">
                    <strong>Recuperaci√≥n de Cuenta</strong><br>
                    Ingresa tu correo electr√≥nico. Si existe una cuenta asociada, te enviaremos un enlace de recuperaci√≥n.
                </div>

                <div class="form-group">
                    <label for="recovery-email">Correo Electr√≥nico</label>
                    <input 
                        type="email" 
                        id="recovery-email" 
                        placeholder="tu@email.com"
                        required
                    >
                </div>

                <button type="submit" class="auth-btn primary">
                    <span>Buscar Cuenta</span>
                </button>

                <button type="button" class="auth-btn text" id="btn-back-to-login">
                    ‚Üê Volver al inicio de sesi√≥n
                </button>

                <div id="recovery-message" class="message"></div>
            </form>

            <form id="verify-identity-form" class="auth-form" style="display: none;">
                <h2 class="form-title">Verificar Identidad</h2>
                
                <div class="alert warning">
                    <strong>Verificaci√≥n de Seguridad</strong><br>
                    Por favor responde las siguientes preguntas para verificar tu identidad.
                </div>

                <div id="identity-questions"></div>

                <button type="submit" class="auth-btn primary">
                    <span>Verificar y Recuperar</span>
                </button>

                <button type="button" class="auth-btn text" id="btn-back-to-recovery">
                    ‚Üê Volver
                </button>

                <div id="verify-message" class="message"></div>
            </form>

            <div id="recovery-success" class="auth-form" style="display: none;">
                <div class="success-animation">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                        <circle cx="40" cy="40" r="38" stroke="#10b981" stroke-width="4"/>
                        <path d="M25 40L35 50L55 30" stroke="#10b981" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h2 class="form-title">¬°Credenciales Enviadas!</h2>
                <div class="alert success">
                    <strong>Recuperaci√≥n Exitosa</strong><br>
                    Hemos enviado tus credenciales al correo electr√≥nico asociado a tu cuenta.
                    <br><br>
                    <strong>Revisa tu bandeja de entrada y spam.</strong>
                </div>
                <div id="account-info"></div>
                <button type="button" class="auth-btn primary" id="btn-back-to-login-success">
                    Volver al inicio de sesi√≥n
                </button>
            </div>
        </div>

        <!-- ========== FORMULARIO DE REGISTRO ========== -->
        <div class="auth-form-container" id="register-container">
            <!-- Selector de tipo de usuario -->
            <div class="user-type-selector">
                <button class="user-type-btn active" data-type="consultor">
                    <div class="user-icon">üë§</div>
                    <h3>Consultor</h3>
                    <p>Usuario general del sistema</p>
                </button>
                <button class="user-type-btn" data-type="analista">
                    <div class="user-icon">üìä</div>
                    <h3>Analista</h3>
                    <p>Crear y enviar reportes</p>
                </button>
                <button class="user-type-btn" data-type="administrador">
                    <div class="user-icon">‚öôÔ∏è</div>
                    <h3>Administrador</h3>
                    <p>Control total del sistema</p>
                </button>
            </div>

            <!-- Formulario de Consultor -->
            <form id="register-consultor-form" class="auth-form active">
                <h2 class="form-title">Registro de Consultor</h2>
                
                <div class="form-group">
                    <label for="reg-consultor-username">Nombre de Usuario</label>
                    <input 
                        type="text" 
                        id="reg-consultor-username" 
                        placeholder="usuario123"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="reg-consultor-email">Email</label>
                    <input 
                        type="email" 
                        id="reg-consultor-email" 
                        placeholder="tu@email.com"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="reg-consultor-password">Contrase√±a</label>
                    <input 
                        type="password" 
                        id="reg-consultor-password" 
                        placeholder="M√≠nimo 6 caracteres"
                        required
                    >
                </div>

                <button type="submit" class="auth-btn primary">
                    <span>Crear Cuenta</span>
                </button>

                <div id="register-consultor-message" class="message"></div>
            </form>

            <!-- Formulario de Analista/Administrador (Solicitud) -->
            <form id="register-special-form" class="auth-form">
                <h2 class="form-title">Solicitud de Registro</h2>
                
                <div class="alert info">
                    <strong>‚ÑπÔ∏è Importante:</strong> Tu solicitud ser√° revisada por un administrador. Recibir√°s un c√≥digo de acceso por email si es aprobada.
                </div>

                <div class="form-group">
                    <label for="reg-special-username">Nombre de Usuario</label>
                    <input 
                        type="text" 
                        id="reg-special-username" 
                        placeholder="usuario123"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="reg-special-email">Email</label>
                    <input 
                        type="email" 
                        id="reg-special-email" 
                        placeholder="tu@email.com"
                        required
                    >
                </div>

                <input type="hidden" id="reg-special-rol" value="analista">

                <button type="submit" class="auth-btn secondary">
                    <span>Enviar Solicitud</span>
                </button>

                <div id="register-special-message" class="message"></div>
            </form>

            <!-- Formulario de Completar Registro (con c√≥digo) -->
            <form id="complete-registration-form" class="auth-form" style="display: none;">
                <h2 class="form-title">Completar Registro</h2>
                
                <div class="alert success">
                    <strong>‚úÖ Solicitud Aprobada</strong><br>
                    Ingresa el c√≥digo que recibiste por email.
                </div>

                <div class="form-group">
                    <label for="complete-email">Email</label>
                    <input 
                        type="email" 
                        id="complete-email" 
                        placeholder="tu@email.com"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="complete-code">C√≥digo de Acceso</label>
                    <input 
                        type="text" 
                        id="complete-code" 
                        placeholder="XXXXXXXX"
                        style="text-transform: uppercase; letter-spacing: 3px; text-align: center; font-size: 18px;"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="complete-password">Contrase√±a</label>
                    <input 
                        type="password" 
                        id="complete-password" 
                        placeholder="M√≠nimo 6 caracteres"
                        required
                    >
                </div>

                <button type="submit" class="auth-btn primary">
                    <span>Crear Cuenta</span>
                </button>

                <button type="button" class="auth-btn text" id="btn-back-to-solicitud">
                    ‚Üê Volver a solicitud
                </button>

                <div id="complete-registration-message" class="message"></div>
            </form>
        </div>

        <!-- Bot√≥n para volver al inicio -->
        <a href="index.html" class="back-home">
            ‚Üê Volver al Inicio
        </a>
    </div>

    <!-- Scripts -->
    <script src="api-client.js"></script>
    <script src="auth.js"></script>
    <script src="auth-recovery.js"></script>
</body>
</html>